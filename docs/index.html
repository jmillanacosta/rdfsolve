<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RDFSolve - Schema Analysis Results</title>
    <link rel="stylesheet" href="style.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Select CSS -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
    <div class="dashboard-container">
        <!-- Main Content Area -->
        <div class="main-content" id="main-content">
            <header class="header">
                <h1>RDFSolve</h1>
                <p>RDF schema extraction and analysis toolkit</p>
                <nav class="header-nav">
                    <a href="https://rdfsolve.readthedocs.io">Documentation</a>
                    <a href="https://github.com/jmillanacosta/rdfsolve">GitHub</a>
                </nav>
                <div id="last-updated" class="last-updated">Loading...</div>
            </header>

            <section class="stats" id="stats-section">
                <div class="stat-card">
                    <div class="stat-number total-number" id="total-datasets">-</div>
                    <div>Total Datasets</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number success-number" id="successful-datasets">-</div>
                    <div>Successful</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number error-number" id="failed-datasets">-</div>
                    <div>Failed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number data-number" id="total-data-files">-</div>
                    <div>Data Files</div>
                </div>
            </section>

            <!-- Linked Schema Cloud Section (Collapsible) -->
            <section id="ls-cloud-container" class="ls-cloud-container ls-cloud-section collapsible-section"
                style="margin-bottom: 32px; background: var(--card-background); border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                <!-- Header with Title and Dataset Selector -->
                <div class="section-header" id="ls-cloud-header"
                    style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; cursor: pointer; user-select: none; gap: 12px;">
                    <div style="display: flex; align-items: center; gap: 8px; flex-shrink: 0;">
                        <span class="collapse-icon" style="font-size: 10px; transition: transform 0.2s;">▼</span>
                        <h2 class="section-title" style="margin: 0; font-size: 14px; white-space: nowrap;">LS Cloud</h2>

                    </div>
                    <!-- Dataset Selector - Always visible, compact -->
                    <div style="display: flex; align-items: center; gap: 8px; flex: 1; min-width: 0;"
                        onclick="event.stopPropagation();">
                        <div style="flex: 1; min-width: 180px; max-width: 320px;">
                            <select id="ls-dataset-select" class="selectpicker form-control" multiple
                                data-live-search="true" data-actions-box="true" data-selected-text-format="count > 2"
                                data-count-selected-text="{0} datasets" title="Datasets...">
                                <!-- Populated dynamically -->
                            </select>
                        </div>
                        <button id="render-ls-cloud" class="btn btn-primary"
                            style="white-space: nowrap; padding: 4px 10px; font-size: 11px;">
                            Render
                        </button>
                        <div class="form-check" style="margin: 0;">
                            <input type="checkbox" class="form-check-input" id="ls-exclude-owl" checked
                                style="margin-top: 0;">
                            <label class="form-check-label" for="ls-exclude-owl"
                                style="font-size: 10px; white-space: nowrap;">Exclude OWL/RDF(S)/FOAF/SPARQL
                                nodes</label>
                        </div>
                        <div id="ls-selected-preview"
                            style="font-size: 9px; color: var(--text-secondary); white-space: nowrap;"></div>
                    </div>

                    <div style="display: flex; gap: 4px; flex-shrink: 0;" onclick="event.stopPropagation();">
                        <button id="ls-fullscreen-btn"
                            style="padding: 3px 8px; font-size: 10px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer;"
                            title="Toggle fullscreen">Fullscreen</button>
                        <button id="ls-exit-fullscreen-btn"
                            style="padding: 3px 8px; font-size: 10px; background: var(--error-color); color: #fff; border: none; border-radius: var(--border-radius); cursor: pointer; display: none;"
                            title="Exit fullscreen">✕</button>
                    </div>
                </div>

                <!-- Collapsible Content -->
                <div id="ls-cloud-content" class="ls-cloud-content" style="padding: 0 10px 8px 10px;">
                    <!-- Main Graph Layout with Path Finder Sidebar -->
                    <div
                        style="display: flex; gap: 0; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: var(--background-color); overflow: hidden; min-height: 0;">

                        <!-- Graph Area -->
                        <div style="flex: 1; display: flex; flex-direction: column; min-width: 0; min-height: 0;">
                            <!-- Toolbar -->
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; padding: 6px 10px; border-bottom: 1px solid var(--border-color); background: var(--card-background); flex-wrap: wrap; gap: 6px;">
                                <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                                    <!-- Node Filter with Bootstrap Select -->
                                    <div style="min-width: 200px;">
                                        <select id="ls-node-filter" class="selectpicker" data-live-search="true"
                                            data-size="10" data-width="200px" title="Focus on node...">
                                            <option value="">All nodes</option>
                                        </select>
                                    </div>
                                    <!-- Node Highlight Filter (separate from focus) -->
                                    <div style="min-width: 200px;">
                                        <select id="ls-node-highlight-filter" class="selectpicker" multiple
                                            data-live-search="true" data-size="10" data-width="220px"
                                            data-selected-text-format="count > 2" data-actions-box="true"
                                            title="Highlight nodes...">
                                        </select>
                                    </div>
                                    <!-- Neighbor Depth -->
                                    <div style="display: flex; align-items: center; gap: 6px;">
                                        <label for="ls-neighbor-depth"
                                            style="font-size: 12px; color: var(--text-secondary);">Depth:</label>
                                        <input type="number" id="ls-neighbor-depth" min="0" max="10" value="2"
                                            style="width: 50px; padding: 4px 6px; border: 1px solid var(--border-color); border-radius: var(--border-radius); font-size: 12px; text-align: center;"
                                            title="0 = show all hops">
                                    </div>
                                </div>

                                <!-- Intersection toggle -->
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <button id="ls-show-intersection"
                                        style="padding: 4px 10px; font-size: 12px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer;"
                                        title="Dim nodes/edges not present in all selected datasets">Show
                                        intersection</button>
                                </div>

                                <!-- Zoom Controls -->
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <button id="ls-zoom-out" title="Zoom Out"
                                        style="width: 24px; height: 24px; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: var(--background-color); cursor: pointer; font-size: 14px;">−</button>
                                    <button id="ls-zoom-in" title="Zoom In"
                                        style="width: 24px; height: 24px; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: var(--background-color); cursor: pointer; font-size: 14px;">+</button>
                                    <button id="ls-zoom-fit"
                                        style="padding: 4px 8px; border: 1px solid var(--border-color); border-radius: var(--border-radius); background: var(--background-color); cursor: pointer; font-size: 11px;">Reset</button>
                                    <!-- Path Finder Toggle Button -->
                                    <button id="ls-path-toggle-btn"
                                        style="padding: 4px 10px; font-size: 12px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer;"
                                        title="Toggle path finder sidebar">Find Path</button>
                                    <!-- Edge Style Toggle Button -->
                                    <button id="ls-edge-style-btn"
                                        style="padding: 4px 10px; font-size: 12px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer;"
                                        title="Toggle between orthogonal and curved edges">Orthogonal</button>
                                </div>
                            </div>

                            <!-- Info/Legend Bar -->
                            <div id="ls-info"
                                style="padding: 8px 12px; border-bottom: 1px solid var(--border-color); display: none; font-size: 12px;">
                            </div>

                            <!-- Graph Area with Spacing Controls -->
                            <div style="display: flex; flex: 1; min-height: 0;">
                                <!-- Y Spacing Controls (vertical, left side) -->
                                <div
                                    style="display: flex; flex-direction: column; align-items: center; padding: 4px 2px; background: var(--card-background); border-right: 1px solid var(--border-color); gap: 2px;">
                                    <span
                                        style="font-size: 8px; color: var(--text-secondary); writing-mode: vertical-rl; transform: rotate(180deg);">Y</span>
                                    <button id="ls-y-spacing-plus"
                                        style="width: 18px; height: 18px; border: 1px solid var(--border-color); border-radius: 3px; background: var(--background-color); cursor: pointer; font-size: 11px;"
                                        title="Increase vertical spacing">+</button>
                                    <span id="ls-y-spacing-val"
                                        style="font-size: 8px; color: var(--text-secondary);">8.0</span>
                                    <button id="ls-y-spacing-minus"
                                        style="width: 18px; height: 18px; border: 1px solid var(--border-color); border-radius: 3px; background: var(--background-color); cursor: pointer; font-size: 11px;"
                                        title="Decrease vertical spacing">−</button>
                                </div>

                                <!-- Main Graph Area -->
                                <div style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
                                    <div id="ls-diagram"
                                        style="min-height: 200px; overflow: hidden; position: relative; background: #fafbfc; flex: 1;">
                                        <div
                                            style="color: var(--text-secondary); text-align: center; padding: 20px; font-size: 12px;">
                                            <div>Select datasets and click <strong>Render</strong></div>
                                        </div>
                                    </div>

                                    <!-- X Spacing Controls (horizontal, bottom) -->
                                    <div
                                        style="display: flex; align-items: center; padding: 3px 8px; background: var(--card-background); border-top: 1px solid var(--border-color); gap: 3px;">
                                        <span style="font-size: 8px; color: var(--text-secondary);">X</span>
                                        <button id="ls-x-spacing-minus"
                                            style="width: 18px; height: 18px; border: 1px solid var(--border-color); border-radius: 3px; background: var(--background-color); cursor: pointer; font-size: 11px;"
                                            title="Decrease horizontal spacing">−</button>
                                        <span id="ls-x-spacing-val"
                                            style="font-size: 8px; color: var(--text-secondary); min-width: 20px; text-align: center;">8.0</span>
                                        <button id="ls-x-spacing-plus"
                                            style="width: 18px; height: 18px; border: 1px solid var(--border-color); border-radius: 3px; background: var(--background-color); cursor: pointer; font-size: 11px;"
                                            title="Increase horizontal spacing">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Path Finder Sidebar (Collapsible) -->
                        <div id="ls-path-sidebar" class="ls-path-sidebar">
                            <!-- Sidebar Header -->
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid var(--border-color);">
                                <span style="font-size: 13px; font-weight: 600; color: var(--text-primary);">Find
                                    Path</span>
                                <button id="ls-path-sidebar-close"
                                    style="background: none; border: none; cursor: pointer; font-size: 16px; color: var(--text-secondary); padding: 0; line-height: 1;"
                                    title="Close sidebar">×</button>
                            </div>

                            <!-- Sidebar Content -->
                            <div style="flex: 1; overflow-y: auto; padding: 12px;">
                                <!-- Path From/To Autocomplete Inputs -->
                                <div style="margin-bottom: 12px;">
                                    <label for="ls-path-from"
                                        style="font-size: 11px; color: var(--text-secondary); display: block; margin-bottom: 4px;">From
                                        Node</label>
                                    <div style="position: relative;">
                                        <input type="text" id="ls-path-from" class="path-autocomplete"
                                            placeholder="Type to search..." autocomplete="off"
                                            style="width: 100%; padding: 8px 10px; font-size: 12px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color);">
                                        <div id="ls-path-from-suggestions" class="autocomplete-suggestions"
                                            style="display: none;"></div>
                                    </div>
                                </div>

                                <div
                                    style="text-align: center; color: var(--text-secondary); font-size: 16px; margin-bottom: 12px;">
                                    ↓</div>

                                <div style="margin-bottom: 12px;">
                                    <label for="ls-path-to"
                                        style="font-size: 11px; color: var(--text-secondary); display: block; margin-bottom: 4px;">To
                                        Node</label>
                                    <div style="position: relative;">
                                        <input type="text" id="ls-path-to" class="path-autocomplete"
                                            placeholder="Type to search..." autocomplete="off"
                                            style="width: 100%; padding: 8px 10px; font-size: 12px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color);">
                                        <div id="ls-path-to-suggestions" class="autocomplete-suggestions"
                                            style="display: none;"></div>
                                    </div>
                                </div>

                                <!-- Path Settings -->
                                <div
                                    style="margin-bottom: 12px; padding: 10px; background: var(--card-background); border: 1px solid var(--border-color); border-radius: 6px;">
                                    <div
                                        style="font-size: 10px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px; text-transform: uppercase;">
                                        Path Settings</div>
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                        <input type="checkbox" id="ls-path-shortest-only" checked style="margin: 0;">
                                        <label for="ls-path-shortest-only"
                                            style="font-size: 11px; color: var(--text-primary); cursor: pointer;">Shortest
                                            path only</label>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <label for="ls-path-max-depth"
                                            style="font-size: 11px; color: var(--text-primary); white-space: nowrap;">Max
                                            depth:</label>
                                        <input type="number" id="ls-path-max-depth" value="5" min="2" max="15"
                                            style="width: 50px; padding: 4px 6px; font-size: 11px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color);">
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div style="display: flex; gap: 6px; margin-bottom: 12px;">
                                    <button id="ls-find-path-btn"
                                        style="flex: 1; padding: 8px 12px; font-size: 12px; background: var(--primary-color); color: #fff; border: none; border-radius: var(--border-radius); cursor: pointer;"
                                        title="Find path between nodes">Find Path</button>
                                </div>
                                <div style="display: flex; gap: 6px; margin-bottom: 12px;">
                                    <button id="ls-add-path-btn"
                                        style="flex: 1; padding: 6px 10px; font-size: 11px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer; display: none;">+
                                        Add Path</button>
                                    <button id="ls-clear-paths-btn"
                                        style="flex: 1; padding: 6px 10px; font-size: 11px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer; display: none;">Clear
                                        All</button>
                                </div>

                                <div id="ls-path-status"
                                    style="font-size: 11px; color: var(--text-secondary); margin-bottom: 10px;"></div>

                                <!-- Path Query Output (SPARQL-like colored bubbles with delete buttons) -->
                                <div id="ls-path-query-text" style="display: none;">
                                    <div
                                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                        <label style="font-size: 11px; color: var(--text-secondary);">Path output:</label>
                                        <div style="display: flex; gap: 4px;">
                                            <button id="ls-generate-sparql-btn"
                                                style="padding: 2px 8px; font-size: 10px; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; cursor: pointer;"
                                                title="Generate SPARQL query">SPARQL</button>
                                            <button id="ls-copy-path-btn"
                                                style="padding: 2px 8px; font-size: 10px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer;"
                                                title="Copy all to clipboard">Copy</button>
                                        </div>
                                    </div>
                                    <div id="ls-path-bubbles"
                                        style="display: flex; flex-direction: column; gap: 8px; max-height: 350px; overflow-y: auto;">
                                    </div>
                                    <textarea id="ls-path-query-txtarea" readonly style="display: none;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="results-section">
                <h2 class="section-title">Dataset Analysis Results</h2>
                <div id="datasets-grid" class="dataset-grid"></div>
            </section>

            <footer class="footer">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>RDFSolve</h3>
                        <p>Automated RDF schema extraction and analysis toolkit</p>
                    </div>
                    <div class="footer-section">
                        <h4>Resources</h4>
                        <ul class="footer-links">
                            <li><a href="https://github.com/jmillanacosta/rdfsolve">GitHub Repository</a></li>
                            <li><a href="https://pypi.org/project/rdfsolve/">PyPI Package</a></li>
                            <li><a href="https://rdfsolve.readthedocs.io">Read the docs</a></li>
                        </ul>
                    </div>
                </div>
            </footer>
        </div>

        <!-- SPARQL Query Modal -->
        <div id="sparql-modal" class="sparql-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
            <div class="sparql-modal-content" style="background: var(--card-background); border-radius: 8px; width: 95%; max-width: 1100px; max-height: 90vh; display: flex; flex-direction: column; box-shadow: 0 4px 24px rgba(0,0,0,0.3);">
                <!-- Modal Header -->
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid var(--border-color);">
                    <h3 style="margin: 0; font-size: 16px; color: var(--text-primary);">SPARQL Query</h3>
                    <button id="sparql-modal-close" style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-secondary); line-height: 1;">&times;</button>
                </div>
                
                <!-- Main Content: Query + Info Panel -->
                <div style="flex: 1; display: flex; overflow: hidden; min-height: 350px;">
                    <!-- Query Editor (left) -->
                    <div style="flex: 1; padding: 16px; display: flex; flex-direction: column; border-right: 1px solid var(--border-color);">
                        <textarea id="sparql-query-textarea" style="flex: 1; width: 100%; padding: 12px; font-family: 'SF Mono', Consolas, 'Courier New', monospace; font-size: 12px; line-height: 1.5; border: 1px solid var(--border-color); border-radius: 6px; background: #1e1e1e; color: #d4d4d4; resize: none;" spellcheck="false"></textarea>
                    </div>
                    
                    <!-- Endpoint Info Panel (right) -->
                    <div style="width: 280px; padding: 16px; background: var(--background-color); overflow-y: auto; font-size: 11px;">
                        <div style="margin-bottom: 16px;">
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 8px; font-size: 12px;">Primary Endpoint</div>
                            <div id="sparql-primary-endpoint" style="color: var(--text-secondary); word-break: break-all; font-family: 'SF Mono', Consolas, monospace; padding: 8px; background: var(--card-background); border-radius: 4px; border: 1px solid var(--border-color);">—</div>
                        </div>
                        
                        <div id="sparql-services-section" style="margin-bottom: 16px; display: none;">
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 8px; font-size: 12px;">Federated Services</div>
                            <div id="sparql-services-list" style="display: flex; flex-direction: column; gap: 6px;"></div>
                        </div>
                        
                        <div id="sparql-graphs-section" style="margin-bottom: 16px; display: none;">
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 8px; font-size: 12px;">Named Graphs</div>
                            <div id="sparql-graphs-list" style="display: flex; flex-direction: column; gap: 6px;"></div>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 8px; font-size: 12px;">Datasets</div>
                            <div id="sparql-datasets-list" style="display: flex; flex-wrap: wrap; gap: 4px;"></div>
                        </div>
                        
                        <div style="padding-top: 12px; border-top: 1px solid var(--border-color); color: var(--text-secondary);">
                            <div id="sparql-modal-info"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Modal Footer -->
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px 20px; border-top: 1px solid var(--border-color); background: var(--background-color);">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <input type="checkbox" id="sparql-require-type" checked style="margin: 0;">
                        <label for="sparql-require-type" style="font-size: 11px; color: var(--text-secondary); cursor: pointer;" title="When checked, variables are constrained to their rdf:type. Uncheck to get broader results without type restrictions.">Require rdf:type</label>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button id="sparql-copy-btn" style="padding: 8px 16px; font-size: 12px; background: var(--card-background); border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer;">Copy Query</button>
                        <button id="sparql-send-btn" style="padding: 8px 16px; font-size: 12px; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; cursor: pointer;">Send Query ↗</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coverage Analysis Panel -->
        <div class="dashboard-panel" id="coverage-panel">
            <div class="panel-header">
                <h2>Coverage Analysis: <span id="coverage-dataset-name"
                        style="font-weight: 400; color: var(--primary-color);"></span></h2>
                <button class="close-panel-btn" data-panel="coverage">&times;</button>
            </div>
            <div class="panel-content">
                <div id="coverage-stats"></div>
                <div class="viz-section">
                    <div class="viz-header">
                        <h3>Coverage vs Occurrence</h3>
                    </div>
                    <div id="coverage-histogram"></div>
                </div>
                <div class="viz-section">
                    <div class="viz-header">
                        <h3>Top Patterns</h3>
                        <label class="show-all-toggle">
                            <input type="checkbox" id="show-all-patterns"> Show All
                        </label>
                    </div>
                    <div id="top-patterns"></div>
                </div>
                <div class="viz-section">
                    <div class="viz-header">
                        <h3>Property Usage</h3>
                        <label class="show-all-toggle">
                            <input type="checkbox" id="show-all-properties"> Show All
                        </label>
                    </div>
                    <div id="property-distribution"></div>
                </div>
            </div>
        </div>

        <!-- Schema Diagram Panel -->
        <div class="dashboard-panel" id="schema-panel">
            <div class="panel-header">
                <h2>Schema Diagram: <span id="schema-dataset-name"
                        style="font-weight: 400; color: var(--primary-color);"></span></h2>
                <button class="close-panel-btn" data-panel="schema">&times;</button>
            </div>
            <div class="panel-controls">
                <div class="schema-options" style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 4px; font-size: 13px; cursor: pointer;">
                        <input type="checkbox" id="schema-exclude-owl" checked>
                        Exclude OWL/RDF(S)/FOAF/SPARQL nodes
                    </label>
                    <div class="zoom-controls">
                        <button id="zoom-out" class="zoom-btn" title="Zoom Out">−</button>
                        <button id="zoom-in" class="zoom-btn" title="Zoom In">+</button>
                        <button id="zoom-fit" class="zoom-btn">Fit</button>
                    </div>
                    <button id="schema-edge-style-btn"
                        style="padding: 4px 10px; font-size: 12px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer;"
                        title="Toggle edge style">Orthogonal</button>
                    <button id="schema-fullscreen-btn"
                        style="padding: 4px 10px; font-size: 12px; background: var(--background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); cursor: pointer;">Fullscreen</button>
                </div>
            </div>
            <div class="panel-content schema-content"
                style="display: flex; flex-direction: column; flex: 1; min-height: 0;">
                <div id="schema-info"></div>
                <!-- Graph Area with Spacing +/- Buttons -->
                <div style="display: flex; flex: 1; min-height: 0;">
                    <!-- Y Spacing Controls (vertical, left side) -->
                    <div
                        style="display: flex; flex-direction: column; align-items: center; padding: 8px 4px; background: var(--card-background); border-right: 1px solid var(--border-color); gap: 4px;">
                        <span
                            style="font-size: 9px; color: var(--text-secondary); writing-mode: vertical-rl; transform: rotate(180deg); margin-bottom: 4px;">Y</span>
                        <button id="schema-y-plus"
                            style="width: 22px; height: 22px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); cursor: pointer; font-size: 14px;">+</button>
                        <span id="schema-y-spacing-val" style="font-size: 9px; color: var(--text-secondary);">8.0</span>
                        <button id="schema-y-minus"
                            style="width: 22px; height: 22px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); cursor: pointer; font-size: 14px;">−</button>
                    </div>

                    <!-- Main Diagram Area -->
                    <div style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
                        <div id="schema-diagram" style="flex: 1; overflow: hidden; min-height: 300px;"></div>

                        <!-- X Spacing Controls (horizontal, bottom) -->
                        <div
                            style="display: flex; align-items: center; padding: 6px 12px; background: var(--card-background); border-top: 1px solid var(--border-color); gap: 6px;">
                            <span style="font-size: 9px; color: var(--text-secondary);">X</span>
                            <button id="schema-x-minus"
                                style="width: 22px; height: 22px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); cursor: pointer; font-size: 14px;">−</button>
                            <span id="schema-x-spacing-val"
                                style="font-size: 9px; color: var(--text-secondary); min-width: 24px; text-align: center;">8.0</span>
                            <button id="schema-x-plus"
                                style="width: 22px; height: 22px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); cursor: pointer; font-size: 14px;">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (required for Bootstrap Select) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap Select JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>

    <script src="app.js"></script>
    <script src="coverage_visualization.js"></script>
    <script src="d3_diagram_utils.js"></script>
    <script src="schema_diagram.js"></script>
    <script src="ls_cloud.js"></script>
</body>

</html>